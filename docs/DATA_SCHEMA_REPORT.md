# Data Schema Report

**Date**: 2024-11-27  
**Subject**: Analysis of available data columns and schema for the quant-ensemble-strategy project.

---

## üìã Executive Summary

This report details the schema of all data currently available and used within the project. 

The key finding is that the project currently **only utilizes price data**. The requested financial metrics such as **ROE (Return on Equity), Margin, and Debt are not present** in the current dataset. All factors used in the strategies (e.g., `value_proxy`) are derived directly from historical price data, not from fundamental financial statements.

---

## 1. Available Data Files

The project contains one primary data file used for all calculations.

### `data/price_data_sp500.csv`

This file contains the daily adjusted closing prices for a universe of 30 stocks, which are components of the S&P 500.

| Property | Description |
|:---|:---|
| **Shape** | 792 rows √ó 30 columns |
| **Date Range** | 2021-06-30 to 2024-12-31 |
| **Granularity** | Daily |
| **Index** | `date` (Datetime) |
| **Columns** | 30 stock tickers (e.g., `AAPL`, `MSFT`, `NVDA`, etc.) |
| **Values** | `float64` (Adjusted closing price in USD) |

#### Schema: `price_data_sp500.csv`

| Column Name | Data Type | Description |
|:---|:---|:---|
| `date` | `datetime64[ns]` | The timestamp for the trading day. |
| `AAPL` | `float64` | Daily adjusted closing price for Apple Inc. |
| `ABBV` | `float64` | Daily adjusted closing price for AbbVie Inc. |
| `ACN` | `float64` | Daily adjusted closing price for Accenture plc. |
| `...` | `float64` | ... (27 other tickers) ... |

---

## 2. Computed Factor Data

No raw financial data files (e.g., from SEC filings) are present. Instead, several "factors" are computed on-the-fly from the price data. These factors are generated by the `utils/factors.py` script.

### Generated Factor Schema

This data is created in memory during a backtest and is not stored as a separate file. It has a MultiIndex format (`date`, `ticker`).

| Column Name | Data Type | Calculation Logic | Description |
|:---|:---|:---|:---|
| `momentum_60d` | `float64` | `price / price.shift(60) - 1.0` | **60-Day Momentum**: The percentage change in price over the last 60 trading days. |
| `volatility_30d` | `float64` | `price.pct_change().rolling(30).std()` | **30-Day Volatility**: The standard deviation of daily returns over the last 30 trading days. |
| `value_proxy` | `float64` | `1.0 / price` | **Value Proxy**: A simplified proxy for a "value" factor. **This is not a true value metric**. It is simply the inverse of the price, used as a placeholder because no fundamental data is available. |
| `value_proxy_inv` | `float64` | `price` | **Inverse Value Proxy**: This is the raw price, used as a feature for the ML model. |

### Important Note on `value_proxy`

The `value_proxy` factor is a critical point of clarification. It is named "value" but it is **not derived from company fundamentals**. A true value factor would typically use metrics from financial statements, such as:
- **P/E Ratio** (Price-to-Earnings)
- **P/B Ratio** (Price-to-Book)
- **Dividend Yield**

The current implementation uses `1 / price` as a simplistic and readily available substitute. This means "cheaper" stocks (in absolute price terms) are considered to have a higher "value", which is a significant simplification.

---

## 3. Conclusion: Data Schema Summary

In summary, the data columns currently available are limited to price-derived metrics. There is no integrated dataset for fundamental financial analysis.

### Available Data:
- **Price Data**: Daily adjusted close for 30 tickers.
- **Computed Factors**:
    - 60-Day Momentum
    - 30-Day Volatility
    - A simplified "Value Proxy" based on inverse price.

### Unavailable Data (Requested):
- **Return on Equity (ROE)**: ‚ùå Not Available
- **Profit Margin (Net, Gross, etc.)**: ‚ùå Not Available
- **Debt Ratios (Debt-to-Equity, etc.)**: ‚ùå Not Available
- **Any other data from Income Statements, Balance Sheets, or Cash Flow Statements**: ‚ùå Not Available

To incorporate true fundamental factors like ROE, Margin, or Debt, a new data source would need to be acquired and integrated into the project. 
